{% extends "base.html" %}
 
{% set pagination = pagination %}
 
{% macro pagination() %}
    {% if total_pages > 1 %}
    <div class="col-12">
        <nav aria-label="Navigation des pages" class="my-4">
            <ul class="pagination justify-content-center">
                {% if current_page > 1 %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ current_page - 1 }}">
                        <i class="fas fa-chevron-left"></i> Précédent
                    </a>
                </li>
                {% endif %}
               
                {% for page in range(1, total_pages + 1) %}
                    {% if page == current_page %}
                    <li class="page-item active">
                        <span class="page-link">{{ page }}</span>
                    </li>
                    {% else %}
                        {% if page <= 3 or page >= total_pages - 2 or (page >= current_page - 1 and page <= current_page + 1) %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page }}">{{ page }}</a>
                        </li>
                        {% elif page == 4 or page == total_pages - 3 %}
                        <li class="page-item disabled">
                            <span class="page-link">...</span>
                        </li>
                        {% endif %}
                    {% endif %}
                {% endfor %}
               
                {% if current_page < total_pages %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ current_page + 1 }}">
                        Suivant <i class="fas fa-chevron-right"></i>
                    </a>
                </li>
                {% endif %}
            </ul>
        </nav>
    </div>
    {% endif %}
{% endmacro %}

{% block content %}
<!-- Vue par défaut (style e-commerce) -->
<div id="defaultView" class="row">
 
    <!-- Section des statistiques -->
    <div class="col-12 mb-4">
        <div class="row g-3">
            <div class="col-md-4">
                <div class="card bg-primary text-white">
                    <div class="card-body">
                        <h5 class="card-title"><i class="fas fa-shopping-cart me-2"></i>Nombre de produits</h5>
                        <p class="card-text h3">{{ products|length }} / page</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card bg-success text-white">
                    <div class="card-body">
                        <h5 class="card-title"><i class="fas fa-tag me-2"></i>Page actuelle</h5>
                        <p class="card-text h3">{{ current_page }} / {{ total_pages }}</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card bg-info text-white">
                    <div class="card-body">
                        <h5 class="card-title"><i class="fas fa-percent me-2"></i>Sites comparés</h5>
                        <p class="card-text h3">3 sites</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
 <!-- Filtres -->
 <div class="col-12 mb-4">
    <div class="card">
        <div class="card-body">
            <div class="row align-items-center">
                <div class="col-md-4">
                    <label class="form-label">Trier par :</label>
                    <select class="form-select" id="sortSelect">
                        <option value="price_asc">Prix croissant</option>
                        <option value="price_desc">Prix décroissant</option>
                        <option value="name_asc">Nom (A-Z)</option>
                        <option value="name_desc">Nom (Z-A)</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label class="form-label">Site :</label>
                    <select class="form-select" id="siteFilter">
                        <option value="all">Tous les sites</option>
                        <option value="Boulanger">Boulanger</option>
                        <option value="CDiscount">CDiscount</option>
                        <option value="eBay">eBay</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label class="form-label">Prix max :</label>
                    <input type="range" class="form-range" id="priceRange" min="0" max="1000" step="50">
                    <div class="text-muted" id="priceValue">1000€</div>
                </div>
            </div>
        </div>
    </div>
</div>